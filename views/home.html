<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Ingreso de Productos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-3">
        <h1 class="alert alert-success">
            Welcome <span id="usernameHome"></span>
                <button class="btn btn-warning float-right mt-2" onclick="location.href='/logout'">
                    Logout
                </button>
        </h1>
    </div>
    <div class="container">
        <div class="row">
            <div id="idProductos">

            </div>
        </div>
    </div>
    <script>
        async function getUserName() {
            const res = await fetch("/username")
            const username = await res.json()
            return username
        }
        const html = document.getElementById("usernameHome")
        getUserName()
            .then(username => {
                html.innerHTML += username
                localStorage.setItem("username", username)
            })

        async function getInventory() {
            const inventoryjson = await fetch("/inventory")
            return inventoryjson
        }

        getInventory()
            .then((res)=>res.json())
            .then((json)=>{
                const prods = json.products
                const htmlProds = document.getElementById("idProductos")
                const strHtml = ""
                prods.forEach(product => {
                    htmlProds.innerHTML+="<strong>"+product.name+"</strong></br>"
                })
            })

    </script>
</body>

</html>